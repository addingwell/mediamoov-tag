___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "categories": [
    "AFFILIATE_MARKETING",
    "ADVERTISING"
  ],
  "displayName": "MediaMoov",
  "brand": {
    "id": "brand_dummy",
    "displayName": "Addingwell",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "Tag to implement server-side cookie for MediaMoov and setup concurrent tracking with server to server (S2S).",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "organizationId",
    "displayName": "Organization Id",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "Your organization identifier on MediaMoov",
    "alwaysInSummary": true
  },
  {
    "type": "TEXT",
    "name": "eventId",
    "displayName": "Event Id",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "Your event identifier on MediaMoov",
    "alwaysInSummary": true
  },
  {
    "type": "CHECKBOX",
    "name": "clearCookie",
    "checkboxText": "Clear MediaMoov cookie when receiving a purchase",
    "simpleValueType": true
  },
  {
    "type": "GROUP",
    "name": "standardParameters",
    "displayName": "Overwrite Standard Parameters",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "LABEL",
        "name": "label1",
        "displayName": "By default, it uses GA4 ecommerce fields"
      },
      {
        "type": "TEXT",
        "name": "transactionId",
        "displayName": "Unique transaction reference",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "purchaseAmount",
        "displayName": "Purchase amount (in EUR), without taxes and shipping",
        "simpleValueType": true
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "advancedParameters",
    "displayName": "Advanced Parameters",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "TEXT",
        "name": "pageViewEvent",
        "displayName": "Page view event name",
        "simpleValueType": true,
        "defaultValue": "page_view"
      },
      {
        "type": "TEXT",
        "name": "purchaseEvent",
        "displayName": "Purchase event name",
        "simpleValueType": true,
        "defaultValue": "purchase"
      },
      {
        "type": "TEXT",
        "name": "leadEvent",
        "displayName": "Lead event name",
        "simpleValueType": true,
        "defaultValue": "generate_lead"
      },
      {
        "type": "TEXT",
        "name": "cookieExpiration",
        "displayName": "Cookie expiration in days",
        "simpleValueType": true,
        "defaultValue": 30,
        "valueValidators": [
          {
            "type": "POSITIVE_NUMBER"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "queryParam",
        "displayName": "Parameter URL name",
        "simpleValueType": true,
        "defaultValue": "tduid",
        "help": "Parameter name sent in URL by MediaMoov"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_SERVER___

const sendHttpRequest = require('sendHttpRequest');
const getAllEventData = require('getAllEventData');
const setCookie = require('setCookie');
const getCookieValues = require('getCookieValues');
const parseUrl = require('parseUrl');
const encodeUriComponent = require('encodeUriComponent');

const eventModel = getAllEventData();

const PAGE_VIEW_EVENT = data.pageViewEvent;
const PURCHASE_EVENT = data.purchaseEvent;
const GENERATE_LEAD_EVENT = data.leadEvent;


function encodeUri(value) {
  value = value || '';
  return encodeUriComponent(value);
}

switch (eventModel.event_name) {
  case PAGE_VIEW_EVENT:
    const parsedUrl = parseUrl(eventModel.page_location);
    const params = {};

    if (parsedUrl && parsedUrl.searchParams) {
      for (let param in parsedUrl.searchParams) {
        if (param.toLowerCase() === data.queryParam) {
          params.tduid = parsedUrl.searchParams[param];
          break;
        }
      }
    }

    if (params.tduid) {
      const value = params.tduid;

      const options = {
        domain: 'auto',
        path: '/',
        secure: true,
        httpOnly: false,
        'max-age': 86400 * data.cookieExpiration
      };
      setCookie('medmoo', value, options, false);
    }

    data.gtmOnSuccess();
    break;
  case PURCHASE_EVENT:
  case GENERATE_LEAD_EVENT:
    const mediaMoovCookie = getCookieValues('medmoo');

    if (!mediaMoovCookie || !mediaMoovCookie[0]) {
      data.gtmOnSuccess();
      break; 
    }

    const urlParams = [
      'organization=' + data.organizationId,
      'event=' + data.eventId,
      'tduid=' + encodeUri(mediaMoovCookie[0]),
      'currency=EUR',
      'orderNumber=' + encodeUri(data.transactionId ? data.transactionId : eventModel.transaction_id),
      'orderValue=' + encodeUri(data.purchaseAmount ? data.purchaseAmount : (eventModel.value - (eventModel.tax || 0)) - (eventModel.shipping || 0)),
    ];

    const urlParamsString = urlParams.filter((v) => v).join('&');

    if (data.clearCookie) {
      setCookie('medmoo', '', {
        domain: 'auto',
        path: '/',
        secure: true,
        httpOnly: false,
        'max-age': 10
      }, false);
    }

    const requestHeaders = { method: 'GET' };
    const url = 'https://tbs.tradedoubler.com/report?' + urlParamsString;
    sendHttpRequest(url, (statusCode, headers, body) => {
      if (statusCode >= 200 && statusCode < 310) {
        data.gtmOnSuccess();
      } else {
        data.gtmOnFailure();
      }
    }, requestHeaders, '');
    break;
  default:
    data.gtmOnSuccess();
    break;
}


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "read_event_data",
        "versionId": "1"
      },
      "param": [
        {
          "key": "eventDataAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_http",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://tbs.tradedoubler.com/report?*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "medmoo"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "/"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "medmoo"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 2/15/2022, 16:06:45

